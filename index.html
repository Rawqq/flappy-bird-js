<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Flappy Bird</title>
  <style>
    canvas { background: #70c5ce; display: block; margin: auto; }
  </style>
</head>
<body>
  <canvas id="game" width="320" height="480"></canvas>
  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    let bird = { x: 50, y: canvas.height/2, vel: 0 };
    let gravity = 0.5;
    let pipes = [];
    function spawnPipe() {
      const gap = 100;
      const topHeight = Math.random() * (canvas.height - gap - 100) + 20;
      pipes.push({ x: canvas.width, top: topHeight, bottom: topHeight + gap });
    }
    function update() {
      bird.vel += gravity;
      bird.y += bird.vel;
      if (bird.y > canvas.height) bird.y = canvas.height;
      if (pipes.length === 0 || pipes[pipes.length-1].x < canvas.width - 200) spawnPipe();
      pipes.forEach(pipe => pipe.x -= 2);
      if (pipes[0] && pipes[0].x < -50) pipes.shift();
    }
    function draw() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle = '#ffa500';
      ctx.fillRect(bird.x, bird.y, 20, 20);
      ctx.fillStyle = '#228B22';
      pipes.forEach(pipe => {
        ctx.fillRect(pipe.x, 0, 50, pipe.top);
        ctx.fillRect(pipe.x, pipe.bottom, 50, canvas.height - pipe.bottom);
      });
    }
    document.addEventListener('keydown', e => {
      if (e.code === 'Space') bird.vel = -7;
    });
    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }
    loop();
  </script>
</body>
</html>
